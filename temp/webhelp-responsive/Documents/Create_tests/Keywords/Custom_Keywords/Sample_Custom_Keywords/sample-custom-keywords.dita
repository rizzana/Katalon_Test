<?xml version="1.0" encoding="utf-8"?><?workdir /Users/rizzastaana/Documents/Katalon_Test/temp/webhelp-responsive/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords?><?workdir-uri file:/Users/rizzastaana/Documents/Katalon_Test/temp/webhelp-responsive/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/?><?path2project ../../../../../?><?path2project-uri ../../../../../?><?path2rootmap-uri ../../../../../?><?doctype-public -//OASIS//DTD DITA Concept//EN?><?doctype-system concept.dtd?><concept xmlns:dita-ot="http://dita-ot.sourceforge.net/ns/201007/dita-ot" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="id" class="- topic/topic concept/concept " ditaarch:DITAArchVersion="1.3" domains="(topic concept) (topic abbrev-d) a(props deliveryTarget) (topic equation-d) (topic hazard-d) (topic hi-d) (topic indexing-d) (topic markup-d) (topic mathml-d) (topic pr-d) (topic relmgmt-d) (topic sw-d) (topic svg-d) (topic ui-d) (topic ut-d) (topic markup-d xml-d)" xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="concept:1;3:57" specializations="@props/deliveryTarget"><title class="- topic/title " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="title:1;3:87">Sample Custom Keywords in <ph class="- topic/ph " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Global_reuse/Name_variables_warehouse/Common_phrases.dita" xtrc="ph:2;3:1075">Katalon Studio</ph></title><conbody class="- topic/body  concept/conbody " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="conbody:1;3:236"><p class="- topic/p " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="p:1;3:258">When creating a <b class="+ topic/ph hi-d/b " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="b:1;3:304">New Custom Keyword</b>, you have
         the options to generate sample custom keywords used for either Web,
         Mobile or API testing. They provide a great example to learn how to
         create custom keywords with proper coding convention in Katalon
         Studio from scratch.</p><p class="- topic/p " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="p:2;7:56">The options are displayed directly when you create a new custom
         keyword.</p><p class="- topic/p " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="p:3;8:44">
      <image href="https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/sample-custom-keywords/Screen-Shot-2018-03-26-at-13.35.02.png" scope="external" class="- topic/image " placement="inline" xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="image:1;9:201"/>
    </p><table class="- topic/table " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="table:1;10:39"><tgroup cols="2" class="- topic/tgroup " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="tgroup:1;10:80"><colspec class="- topic/colspec " colnum="1" colname="col1"/><colspec class="- topic/colspec " colnum="2" colname="col2"/><thead class="- topic/thead " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="thead:1;10:110"><row class="- topic/row " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="row:1;10:136"><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:1;10:166" colname="col1" dita-ot:x="1" dita-ot:y="1">Option</entry><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:2;10:210" colname="col2" dita-ot:x="2" dita-ot:y="1">Description</entry></row></thead><tbody class="- topic/tbody " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="tbody:1;10:273"><row class="- topic/row " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="row:2;10:299"><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:3;10:329" colname="col1" dita-ot:x="1" dita-ot:y="2">Generate sample keywords for Web</entry><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:4;10:399" colname="col2" dita-ot:x="2" dita-ot:y="2">Generate some sample functions used for Web Testing</entry></row><row class="- topic/row " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="row:3;10:490"><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:5;10:520" colname="col1" dita-ot:x="1" dita-ot:y="3">Generate sample keywords for Mobile</entry><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:6;10:593" colname="col2" dita-ot:x="2" dita-ot:y="3">Generate some sample functions used for Mobile Testing</entry></row><row class="- topic/row " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="row:4;10:687"><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:7;10:717" colname="col1" dita-ot:x="1" dita-ot:y="4">Generate sample keywords for API</entry><entry class="- topic/entry " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="entry:8;10:787" colname="col2" dita-ot:x="2" dita-ot:y="4">Generate some sample functions used for API Testing</entry></row></tbody></tgroup></table><p class="- topic/p " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="p:4;10:899">You can select <b class="+ topic/ph hi-d/b " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="b:2;10:944">one</b> or <b class="+ topic/ph hi-d/b " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="b:3;10:985">all</b> of
         these options to have all sample custom keywords generated in one
         file. For example, select all options, the generated custom keyword
         will look like as below:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="codeblock:1;13:85">class sampleKeywords {
    /**
     * Refresh browser
     */
    @Keyword
    def refreshBrowser() {
        KeywordUtil.logInfo("Refreshing")
        WebDriver webDriver = DriverFactory.getWebDriver()
        webDriver.navigate().refresh()
        KeywordUtil.markPassed("Refresh successfully")
    }

    /**
     * Click element
     * @param to Katalon test object
     */
    @Keyword
    def clickElement(TestObject to) {
        try {
            WebElement element = WebUiBuiltInKeywords.findWebElement(to);
            KeywordUtil.logInfo("Clicking element")
            element.click()
            KeywordUtil.markPassed("Element has been clicked")
        } catch (WebElementNotFoundException e) {
            KeywordUtil.markFailed("Element not found")
        } catch (Exception e) {
            KeywordUtil.markFailed("Fail to click on element")
        }
    }

    /**
     * Get all rows of HTML table
     * @param table Katalon test object represent for HTML table
     * @param outerTagName outer tag name of TR tag, usually is TBODY
     * @return All rows inside HTML table
     */
    @Keyword
    def List&lt;WebElement&gt; getHtmlTableRows(TestObject table, String outerTagName) {
        WebElement mailList = WebUiBuiltInKeywords.findWebElement(table)
        List&lt;WebElement&gt; selectedRows = mailList.findElements(By.xpath("./" + outerTagName + "/tr"))
        return selectedRows
    }

    /**
     * Check if element present in timeout
     * @param to Katalon test object
     * @param timeout time to wait for element to show up
     * @return true if element present, otherwise false
     */
    @Keyword
    def isElementPresent_Mobile(TestObject to, int timeout){
        try {
            KeywordUtil.logInfo("Finding element with id:" + to.getObjectId())

            WebElement element = MobileElementCommonHelper.findElement(to, timeout)
            if (element != null) {
                KeywordUtil.markPassed("Object " + to.getObjectId() + " is present")
            }
            return true
        } catch (Exception e) {
            KeywordUtil.markFailed("Object " + to.getObjectId() + " is not present")
        }
        return false;
    }

    /**
     * Get mobile driver for current session
     * @return mobile driver for current session
     */
    @Keyword
    def WebDriver getCurrentSessionMobileDriver() {
        return MobileDriverFactory.getDriver();
    }

    /**
     * Send request and verify status code
     * @param request request object, must be an instance of RequestObject
     * @param expectedStatusCode
     * @return a boolean to indicate whether the response status code equals the expected one
     */
    @Keyword
    def verifyStatusCode(TestObject request, int expectedStatusCode) {
        if (request instanceof RequestObject) {
            RequestObject requestObject = (RequestObject) request
            ResponseObject response = WSBuiltInKeywords.sendRequest(requestObject)
            if (response.getStatusCode() == expectedStatusCode) {
                KeywordUtil.markPassed("Response status codes match")
            } else {
                KeywordUtil.markFailed("Response status code not match. Expected: " +
                        expectedStatusCode + " - Actual: " + response.getStatusCode() )
            }
        } else {
            KeywordUtil.markFailed(request.getObjectId() + " is not a RequestObject")
        }
    }

    /**
     * if a key is given make an object of objects by this data column key, otherwise make it an object of an array for each line
     * E.g. use method like such Map propertiesJSON = sampleKeywords.toJSONByKey(findTestData('Other/properties'),'env')
     * @param TestData
     * @param String
     * @return
     */
    @Keyword
    def toJSONByKey(TestData data,String key=null){
        String []columnNames = data.getColumnNames()
        JsonSlurper slurper = new JsonSlurper()

        Map dataJSON = key == null ? [:] : slurper.parseText('{}')

        for (def index : (1..data.getRowNumbers())){
            dataJSON[key == null ? index-1 : data.getValue(key, index)]=slurper.parseText('{}')
            for (def col : (1..data.getColumnNumbers())) {
                String columnName = columnNames[col-1]
                String cellValue = data.getValue(col,index).trim()
                dataJSON[key == null ? index-1 : data.getValue(key, index)][columnName]=cellValue
            }
        }
        return dataJSON
    }


    /**
     * Add Header basic authorization field,
     * this field value is Base64 encoded token from user name and password
     * @param request object, must be an instance of RequestObject
     * @param username username
     * @param password password
     * @return the original request object with basic authorization header field added
     */
    @Keyword
    def addBasicAuthorizationProperty(TestObject request, String username, String password) {
        if (request instanceof RequestObject) {
            String authorizationValue = username + ":" + password
            authorizationValue = "Basic " + authorizationValue.bytes.encodeBase64().toString()

            // Find available basic authorization field and change its value to the new one, if any
            List&lt;TestObjectProperty&gt; headerProperties = request.getHttpHeaderProperties()
            boolean fieldExist = false
            for (int i = 0; i &lt; headerProperties.size(); i++) {
                TestObjectProperty headerField = headerProperties.get(i)
                if (headerField.getName().equals('Authorization')) {
                    KeywordUtil.logInfo("Found existent basic authorization field. Replacing its value.")
                    headerField.setValue(authorizationValue)
                    fieldExist = true
                    break
                }
            }

            if (!fieldExist) {
                TestObjectProperty authorizationProperty = new TestObjectProperty("Authorization",
                        ConditionType.EQUALS, authorizationValue, true)
                headerProperties.add(authorizationProperty)
            }
            KeywordUtil.markPassed("Basic authorization field has been added to request header")
        } else {
            KeywordUtil.markFailed(request.getObjectId() + "is not a RequestObject")
        }
        return request
    }


}
</codeblock><p class="- topic/p " xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="p:5;176:35">
      <image href="https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/sample-custom-keywords/Screen-Shot-2018-03-26-at-13.36.40.png" scope="external" class="- topic/image " placement="inline" xtrf="file:/Users/rizzastaana/Documents/Katalon_Test/Documents/Create_tests/Keywords/Custom_Keywords/Sample_Custom_Keywords/sample-custom-keywords.dita" xtrc="image:2;177:201"/>
    </p></conbody></concept>